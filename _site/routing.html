<!DOCTYPE HTML>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="search-domain" content="http://rangle.io" />
    <link href="http://localhost:4000/css/bootstrap.css" rel="stylesheet" />
    <link href="http://localhost:4000/css/bootstrap-theme.css" rel="stylesheet" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Routing</title>
  </head>
  <body>
    <div class="container shadow">
      <div class="row-fluid">
        <div class="span10 offset1">
          <p><a href="http://rangle.io">Rangle.io</a> Angular Training</a></p>
          <h1>Routing</h1>
          <hr />
<!-- .slide: id="routing-advanced-roadmap" -->
<h2 id="roadmap">Roadmap</h2>

<ol>
  <li>How do I route different URLs to different parts of an application?</li>
  <li>How do I change what is displayed based on the URL?</li>
</ol>

<hr />
<!-- .slide: id="routing-advanced-why-routing" -->
<h2 id="why-routing">Why Routing?</h2>

<ul>
  <li>Routing allows users to navigate to different parts of the application
while maintaining application state</li>
  <li>Angular encourages creation of modular applications (every module define its own routes)</li>
  <li>Note: routing is optional
    <ul>
      <li>Can build applications that never change URL</li>
      <li>But that makes locations within the application un-bookmarkable</li>
    </ul>
  </li>
</ul>

<hr />
<!-- .slide: id="routing-fancy-lists" -->
<h2 id="fancy-lists">Fancy Lists</h2>

<ul>
  <li>Create a <code class="highlighter-rouge">FancyListComponent</code> that displays the same to-do list in a different way</li>
  <li>Allow users to switch between them by going to <code class="highlighter-rouge">/todo</code> and <code class="highlighter-rouge">/fancy</code></li>
</ul>

<p><em>src/app/fancy-list/fancy-list.component.html</em></p>
<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;table&gt;</span>
  <span class="nt">&lt;tr</span> <span class="err">*</span><span class="na">ngFor=</span><span class="s">"let item of thingsToDo; let i = index"</span> <span class="na">id=</span><span class="s">"{{i}}"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;td&gt;</span>{{i}}<span class="nt">&lt;/td&gt;</span>
    <span class="nt">&lt;td</span> <span class="na">class=</span><span class="s">"item"</span><span class="nt">&gt;</span>{{item}}<span class="nt">&lt;/td&gt;</span>
  <span class="nt">&lt;/tr&gt;</span>
<span class="nt">&lt;/table&gt;</span>
</code></pre>
</div>

<p><em>src/app/fancy-list/fancy-list.component.css</em></p>
<div class="language-css highlighter-rouge"><pre class="highlight"><code><span class="nt">td</span><span class="nc">.item</span> <span class="p">{</span>
    <span class="nl">color</span><span class="p">:</span> <span class="m">#E0E0E0</span><span class="p">;</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="m">#202020</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

<hr />
<!-- .slide: id="routing-configuring-routing" -->
<h2 id="configuring-routing">Configuring Routing</h2>

<ul>
  <li>Set <code class="highlighter-rouge">base</code> tag in the <code class="highlighter-rouge">&lt;head&gt;</code> of <code class="highlighter-rouge">src/index.html</code> to tell Angular where routes start</li>
</ul>

<p><em>src/index.html</em></p>
<div class="language-html highlighter-rouge"><pre class="highlight"><code> <span class="nt">&lt;base</span> <span class="na">href=</span><span class="s">"/"</span><span class="nt">&gt;</span>
</code></pre>
</div>

<ul>
  <li>Allows applications to be hosted below the root of the domain
    <ul>
      <li>E.g., <code class="highlighter-rouge">http://rangle.io/some/path</code> would set <code class="highlighter-rouge">base</code> to <code class="highlighter-rouge">/some/path</code></li>
    </ul>
  </li>
</ul>

<hr />
<!-- .slide: id="routing-defining-routes" -->
<h2 id="defining-routes">Defining Routes</h2>

<ul>
  <li>Create array of type <code class="highlighter-rouge">Routes</code> that specifies what to do with different paths</li>
  <li>A plain TypeScript file (not created with Angular CLI)</li>
</ul>

<p><em>src/app/app.routes.ts</em></p>
<div class="language-ts highlighter-rouge"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Routes</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/router'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">ToDoListComponent</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'./to-do-list/to-do-list.component'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">FancyListComponent</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'./fancy-list/fancy-list.component'</span><span class="p">;</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">routeConfig</span><span class="err">:</span> <span class="nx">Routes</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span> <span class="na">redirectTo</span><span class="p">:</span> <span class="s1">'/todo'</span><span class="p">,</span> <span class="na">pathMatch</span><span class="p">:</span> <span class="s1">'full'</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="s1">'todo'</span><span class="p">,</span> <span class="na">component</span><span class="p">:</span> <span class="nx">ToDoListComponent</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="s1">'fancy'</span><span class="p">,</span> <span class="na">component</span><span class="p">:</span> <span class="nx">FancyListComponent</span> <span class="p">}</span>
<span class="p">];</span>
</code></pre>
</div>

<hr />
<!-- .slide: id="routing-common-attributes-in-routes" -->
<h2 id="common-attributes-in-routes">Common Attributes in Routes</h2>

<table>
  <thead>
    <tr>
      <th>Attribute</th>
      <th>Use</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">path</code></td>
      <td>Browser URL for route</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">component</code></td>
      <td>Component displayed for route</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">redirectTo</code></td>
      <td>Where to redirect</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">pathMatch</code></td>
      <td>Match full <code class="highlighter-rouge">path</code> or just the beginning?</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">children</code></td>
      <td>Array of route definitions objects representing child routes</td>
    </tr>
  </tbody>
</table>

<ul>
  <li><code class="highlighter-rouge">component</code> and <code class="highlighter-rouge">redirectTo</code> are mutually exclusive</li>
  <li><code class="highlighter-rouge">children</code> will be discussed later</li>
</ul>

<hr />
<!-- .slide: id="routing-adding-router-module" -->
<h2 id="adding-router-module">Adding Router Module</h2>

<ul>
  <li>Import <code class="highlighter-rouge">routeConfig</code> into <code class="highlighter-rouge">app.module.ts</code></li>
  <li>Add <code class="highlighter-rouge">RouterModule.forRoot(routeConfig)</code> to <code class="highlighter-rouge">imports</code>
    <ul>
      <li>Creates a <em>configured</em> router module</li>
    </ul>
  </li>
</ul>

<p><em>src/app/app.module.ts</em></p>
<div class="language-ts highlighter-rouge"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">RouterModule</span><span class="p">,</span> <span class="nx">Routes</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/router'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">routeConfig</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'./app.routes'</span><span class="p">;</span>

<span class="err">@</span><span class="nx">NgModule</span><span class="p">({</span>
  <span class="c1">// ...as before...</span>
  <span class="na">imports</span><span class="p">:</span> <span class="p">[</span>
    <span class="c1">// ...as before...</span>
    <span class="nx">RouterModule</span><span class="p">.</span><span class="nx">forRoot</span><span class="p">(</span><span class="nx">routeConfig</span><span class="p">)</span>
  <span class="p">],</span>
  <span class="c1">// ...as before...</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kr">class</span> <span class="nx">AppModule</span> <span class="p">{</span> <span class="p">}</span>
</code></pre>
</div>

<hr />
<!-- .slide: id="routing-adding-router-outlet" -->
<h2 id="adding-routeroutlet">Adding RouterOutlet</h2>

<ul>
  <li>Use <code class="highlighter-rouge">&lt;router-outlet&gt;&lt;/router-outlet&gt;</code> to show where to display routed content</li>
  <li>Angular dynamically places content <em>after</em> the tag</li>
</ul>

<p><em>src/app/app.component.html</em></p>
<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>{{title}}<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;nav&gt;</span>
  <span class="nt">&lt;a</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]="['/</span><span class="na">todo</span><span class="err">']"</span><span class="nt">&gt;</span>Classic<span class="nt">&lt;/a&gt;</span>
  <span class="nt">&lt;a</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]="['/</span><span class="na">fancy</span><span class="err">']"</span><span class="nt">&gt;</span>Fancy<span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/nav&gt;</span>
<span class="nt">&lt;router-outlet&gt;&lt;/router-outlet&gt;</span>
<span class="nt">&lt;app-generic-input</span> <span class="err">(</span><span class="na">newItem</span><span class="err">)="</span><span class="na">onNewItem</span><span class="err">($</span><span class="na">event</span><span class="err">)"</span><span class="nt">&gt;&lt;/app-generic-input&gt;</span>
</code></pre>
</div>

<ul>
  <li>Use <code class="highlighter-rouge">routerLink</code> to create links between dynamic components
    <ul>
      <li>Parameter is an array of values</li>
    </ul>
  </li>
</ul>

<!-- preview: https://plnkr.co/edit/3EH52DtjS1Z5fUbycMX9?p=preview -->

<hr />
<!-- .slide: id="routing-final-appearance" -->
<h2 id="final-appearance">Final Appearance</h2>

<table>
  <thead>
    <tr>
      <th>Classic View</th>
      <th>Fancy View</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><img src="images/screenshot-classic-view.png" alt="Classic View" /></td>
      <td><img src="images/screenshot-fancy-view.png" alt="Fancy View" /></td>
    </tr>
  </tbody>
</table>

<ul>
  <li>But going to <code class="highlighter-rouge">http://localhost:4200/todo</code> clears all the to-do items!</li>
  <li>…pause for thought…</li>
  <li>Because we’re re-loading the application, which throws away the accumulated list</li>
  <li>We need to persist our data</li>
</ul>

          <hr/>
          <a href="http://localhost:4000/">Home</a>
        </div>
      </div>
    </div>
  </body>
</html>
