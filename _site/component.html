<!DOCTYPE HTML>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="search-domain" content="http://rangle.io" />
    <link href="http://localhost:4000/css/bootstrap.css" rel="stylesheet" />
    <link href="http://localhost:4000/css/bootstrap-theme.css" rel="stylesheet" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Creating a New Component</title>
  </head>
  <body>
    <div class="container shadow">
      <div class="row-fluid">
        <div class="span10 offset1">
          <p><a href="http://rangle.io">Rangle.io</a> Angular Training</a></p>
          <h1>Creating a New Component</h1>
          <hr />
<!-- .slide: id="components-roadmap" -->
<h2 id="roadmap">Roadmap</h2>

<ol>
  <li>How do I create a new component?</li>
  <li>How does Angular name components?</li>
  <li>How do I include a component in my display?</li>
  <li>How do I pass data to a component?</li>
</ol>

<hr />
<!-- .slide: id="components-generating-new-components" -->
<h2 id="generating-a-new-component">Generating a New Component</h2>

<ul>
  <li>Use Angular CLI to create a new component to display the list
    <ul>
      <li>But keep the data in <code class="highlighter-rouge">app.component.ts</code></li>
    </ul>
  </li>
  <li><code class="highlighter-rouge">ng generate component toDoList</code>
    <ul>
      <li><code class="highlighter-rouge">ng generate</code> can be run from any folder within the project</li>
    </ul>
  </li>
  <li>Creates <code class="highlighter-rouge">src/app/to-do-list/*</code>
    <div class="highlighter-rouge"><pre class="highlight"><code>├── src
│   ├── app
│   │   └── to-do-list
│   │       ├── to-do-list.component.css
│   │       ├── to-do-list.component.html
│   │       ├── to-do-list.component.spec.ts
│   │       └── to-do-list.component.ts
</code></pre>
    </div>
  </li>
</ul>

<hr />
<!-- .slide: id="components-conventions" -->
<h2 id="conventions">Conventions</h2>

<ul>
  <li>Component class name is <code class="highlighter-rouge">ToDoListComponent</code></li>
  <li>HTML selector is <code class="highlighter-rouge">app-to-do-list</code>
    <ul>
      <li><code class="highlighter-rouge">app</code> prefix to prevent namespace collisions
        <ul>
          <li>Prefix can be customized when creating the application using <code class="highlighter-rouge">--prefix</code></li>
          <li>Or by modifying the <code class="highlighter-rouge">prefix</code> property in <code class="highlighter-rouge">.angular-cli.json</code></li>
        </ul>
      </li>
    </ul>
  </li>
  <li>What to put in constructor and <code class="highlighter-rouge">ngOnInit</code> will be discussed later</li>
</ul>

<p><em>src/app/to-do-list/to-do-list.component.ts</em></p>
<div class="highlighter-rouge"><pre class="highlight"><code>@Component({
  selector: 'app-to-do-list',
  templateUrl: './to-do-list.component.html',
  styleUrls: ['./to-do-list.component.css']
})
export class ToDoListComponent implements OnInit {

  constructor() { }

  ngOnInit() {
  }

}
</code></pre>
</div>

<hr />
<!-- .slide: id="components-including" -->

<h2 id="including-a-component">Including a Component</h2>

<ul>
  <li>Refer to the component by putting its <code class="highlighter-rouge">selector</code> in another component’s template</li>
</ul>

<p><em>src/app/app.component.html</em></p>
<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>{{title}}<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;p&gt;</span>Summary: {{summary()}}<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p</span> <span class="err">*</span><span class="na">ngFor=</span><span class="s">"let item of thingsToDo; let i = index"</span> <span class="na">id=</span><span class="s">"{{i}}"</span><span class="nt">&gt;</span>({{i}}) {{item}}<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p</span> <span class="err">*</span><span class="na">ngIf=</span><span class="s">"thingsCompleted.length == 0"</span><span class="nt">&gt;</span>Nothing completed<span class="nt">&lt;/p&gt;</span>
</code></pre>
</div>

<p><img src="./images/screenshot-child-initial.png" alt="Child Component (Original)" /></p>

<hr />
<!-- .slide: id="components-passing-data-1" -->
<h2 id="passing-data-to-a-component">Passing Data to a Component</h2>

<ul>
  <li>Need to:
    <ol>
      <li>Create a variable in the child to receive the value</li>
      <li>Use <code class="highlighter-rouge">@Input()</code> decorator to identify the variable</li>
    </ol>
  </li>
</ul>

<p><em>src/app/to-do-list/to-do-list.component.ts</em></p>
<div class="language-ts highlighter-rouge"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">OnInit</span><span class="p">,</span> <span class="nx">Input</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
  <span class="c1">// ...as before...</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kr">class</span> <span class="nx">ToDoListComponent</span> <span class="k">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>

  <span class="err">@</span><span class="nx">Input</span><span class="p">()</span> <span class="nx">heading</span><span class="err">:</span> <span class="kr">string</span><span class="p">;</span>

  <span class="c1">// ...as before...</span>
<span class="p">}</span>
</code></pre>
</div>

<p>Reminder: Angular decorators are functions.
Even if you don’t pass arguments, you need the parentheses.</p>

<hr />
<!-- .slide: id="components-passing-data-2" -->

<h2 id="passing-data-to-a-component-1">Passing Data to a Component</h2>

<ul>
  <li>And then pass data from the parent
    <ul>
      <li>Just like a function call</li>
    </ul>
  </li>
</ul>

<p><em>src/app/app.component.html</em></p>
<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>{{title}}<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;p</span> <span class="err">*</span><span class="na">ngFor=</span><span class="s">"let item of thingsToDo; let i = index"</span> <span class="na">id=</span><span class="s">"{{i}}"</span><span class="nt">&gt;</span>({{i}}) {{item}}<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;app-to-do-list</span> <span class="err">[</span><span class="na">heading</span><span class="err">]="</span><span class="na">Things</span> <span class="na">To</span> <span class="na">Do</span><span class="err">"</span><span class="nt">&gt;&lt;/app-to-do-list&gt;</span>
</code></pre>
</div>

<ul>
  <li>Whoops: compiler error!</li>
</ul>

<p><em>src/app/app.component.html</em> (corrected)</p>
<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;app-to-do-list</span> <span class="err">[</span><span class="na">heading</span><span class="err">]="'</span><span class="na">Things</span> <span class="na">To</span> <span class="na">Do</span><span class="err">'"</span><span class="nt">&gt;&lt;/app-to-do-list&gt;</span>
</code></pre>
</div>

<ul>
  <li>Must single-quote the string or Angular will think it’s a function.</li>
</ul>

<hr />
<!-- .slide: id="components-passing-data-3" -->

<h2 id="passing-data-to-a-component-2">Passing Data to a Component</h2>

<ul>
  <li>Angular also has a shorthand for passing string properties to components:</li>
</ul>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;app-to-do-list</span> <span class="na">heading=</span><span class="s">"Things To Do"</span><span class="nt">&gt;&lt;/app-to-do-list&gt;</span>
</code></pre>
</div>

<p>Passing strings to components in this way resembles setting properties in HTML elements.</p>

<hr />
<!-- .slide: id="components-refactoring-1" -->

<h2 id="refactoring">Refactoring</h2>

<ul>
  <li>Pass a variable instead of a constant string</li>
  <li>While we’re at it, remove the heading from the child component</li>
  <li>And use a proper list instead of a bunch of paragraphs</li>
</ul>

<p><em>src/app/app.component.html</em></p>
<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>{{title}}<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;app-to-do-list</span> <span class="err">[</span><span class="na">thingsToDo</span><span class="err">]="</span><span class="na">thingsToDo</span><span class="err">"</span><span class="nt">&gt;&lt;/app-to-do-list&gt;</span>
</code></pre>
</div>

<ul>
  <li><code class="highlighter-rouge">[thingsToDo]</code> on the <em>left</em> is the input parameter in the child</li>
  <li><code class="highlighter-rouge">thingsToDo</code> on the <em>right</em> is what we’re passing in</li>
</ul>

<hr />
<!-- .slide: id="components-refactoring-2" -->

<h2 id="refactoring-1">Refactoring</h2>

<ul>
  <li>Move the loop over the list into the child component’s HTML</li>
</ul>

<p><em>src/app/to-do-list/to-do-list.component.html</em></p>
<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;ul&gt;</span>
  <span class="nt">&lt;li</span> <span class="err">*</span><span class="na">ngFor=</span><span class="s">"let item of thingsToDo; let i = index"</span> <span class="na">id=</span><span class="s">"{{i}}"</span><span class="nt">&gt;</span>{{item}}<span class="nt">&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</code></pre>
</div>

<ul>
  <li>Create the required variable in the child component class</li>
</ul>

<p><em>src/app/to-do-list/to-do-list.component.ts</em></p>
<div class="language-ts highlighter-rouge"><pre class="highlight"><code><span class="k">export</span> <span class="kr">class</span> <span class="nx">ToDoListComponent</span> <span class="k">implements</span> <span class="nx">OnInit</span> <span class="p">{</span>

  <span class="err">@</span><span class="nx">Input</span><span class="p">()</span> <span class="nx">thingsToDo</span><span class="err">:</span> <span class="kr">string</span><span class="p">[];</span>

  <span class="c1">// ...as before...</span>
<span class="p">}</span>
</code></pre>
</div>

<hr />
<!-- .slide: id="components-refactoring-3" -->

<h2 id="refactoring-2">Refactoring</h2>

<p><img src="./images/screenshot-refactored.png" alt="After Refactoring" /></p>

<ul>
  <li>More elaborate than necessary if we were stopping here…</li>
  <li>…but absolutely necessary to control complexity in large projects</li>
</ul>

<hr />
<!-- .slide: id="components-quiz-1" -->
<!-- .slide: data-background=".././images/question-slide.jpg" -->

<h2 id="quiz">Quiz</h2>

<p>What is the best way for a child component to receive data passed to
it from a parent component?</p>

<ol>
  <li>
    <p>A member decorated with <code class="highlighter-rouge">@Output</code>.</p>
  </li>
  <li>
    <p>A shared variable protected by a lock.</p>
  </li>
  <li>
    <p>A member decorated with <code class="highlighter-rouge">@Input</code>.</p>
  </li>
</ol>

<p>+++
<!-- .slide: data-background=".././images/answer-slide.jpg" --></p>

<h2 id="answer">Answer</h2>

<p>Correct answer is 3.</p>

<p>1: This answer may expose confusion between the directionality of
inputs and outputs.</p>

<p>2: This answer may indicate that the learner is thinking of active
components in a multi-threaded system.</p>

<hr />
<!-- .slide: id="components-quiz-2" -->
<h2 id="question">Question</h2>

<p>Given the following, what text would be rendered to the screen?</p>

<div class="language-ts highlighter-rouge"><pre class="highlight"><code><span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="s1">'parent'</span><span class="p">,</span>
  <span class="na">template</span><span class="p">:</span> <span class="err">`</span>
    <span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="na">Parent</span><span class="p">:</span> <span class="p">{{</span> <span class="nx">message</span> <span class="p">}}</span><span class="o">&lt;</span><span class="sr">/div</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="nx">child</span> <span class="nx">message</span><span class="o">=</span><span class="s2">"Greetings"</span><span class="o">&gt;&lt;</span><span class="sr">/child</span><span class="err">&gt;
</span>  <span class="err">`</span>
<span class="p">})</span>
<span class="k">export</span> <span class="kr">class</span> <span class="nx">Parent</span> <span class="p">{</span>
  <span class="err">@</span><span class="nx">Input</span><span class="p">()</span> <span class="na">message</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="s1">'child'</span><span class="p">,</span>
  <span class="na">template</span><span class="p">:</span> <span class="err">`</span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="na">Child</span><span class="p">:</span> <span class="p">{{</span> <span class="nx">message</span> <span class="p">}}</span><span class="o">&lt;</span><span class="sr">/div&gt;</span><span class="err">`
</span><span class="p">})</span>
<span class="k">export</span> <span class="kr">class</span> <span class="nx">Child</span> <span class="p">{</span>
  <span class="err">@</span><span class="nx">Input</span><span class="p">()</span> <span class="na">message</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

<hr />
<!-- .slide: id="components-quiz-3" -->
<!-- .slide: data-background=".././images/question-slide.jpg" -->

<h2 id="quiz-continued">Quiz (continued)</h2>

<ol>
  <li>
    <p>Parent:<br />
Child: Greetings</p>
  </li>
  <li>
    <p>Parent: Greetings<br />
Child: Greetings</p>
  </li>
  <li>
    <p>Parent: Greetings<br />
Child:</p>
  </li>
</ol>

<p>+++
<!-- .slide: data-background=".././images/answer-slide.jpg" --></p>

<h2 id="answer-1">Answer</h2>

<p>Correct answer is 1.</p>

<p>2: May expose confusion in the what <code class="highlighter-rouge">message="Greeting"</code> is actually
doing. It does not imply a “global” member assignment, and values are
not “inherited” or otherwise made available to child components
implicitly.</p>

<p>3: May expose a confusion in the directionality of the
<code class="highlighter-rouge">message="Greeting"</code> assignment. In this case the parent is passing
the string “Greeting” down into the child component, not the other way
around.</p>

<hr />
<!-- .slide: id="components-quiz-4" -->
<!-- .slide: data-background=".././images/question-slide.jpg" -->

<h2 id="quiz-1">Quiz</h2>

<p>How can an object reference be passed down into a child component
input called <code class="highlighter-rouge">data</code> from the parent’s template?</p>

<ol>
  <li>
    <p><code class="highlighter-rouge">[data]="myData"</code></p>
  </li>
  <li>
    <p><code class="highlighter-rouge">data="myData"</code></p>
  </li>
  <li>
    <p><code class="highlighter-rouge">(data)="myData"</code></p>
  </li>
  <li>
    <p><code class="highlighter-rouge">[data]="{{myData}}"</code></p>
  </li>
</ol>

<p>+++
<!-- .slide: data-background=".././images/answer-slide.jpg" --></p>

<h2 id="answer-2">Answer</h2>

<p>Correct answer is 1.</p>

<p>2: May expose confusion between the differences in <code class="highlighter-rouge">[]</code> notation, and
passing data as a string.</p>

<p>3: May expose confusion between the differences between input <code class="highlighter-rouge">[]</code>
notation and output/event <code class="highlighter-rouge">()</code> notation.</p>

<p>4: May expose confusion with what interpolation is/does and not
understanding that it’s not required here.</p>

<hr />
<!-- .slide: id="components-quiz-5" -->
<!-- .slide: data-background=".././images/question-slide.jpg" -->

<h2 id="quiz-2">Quiz</h2>

<p>Given the following component and usage, what would be rendered to the screen?</p>

<div class="language-ts highlighter-rouge"><pre class="highlight"><code><span class="err">@</span><span class="nx">Component</span><span class="p">({</span>
  <span class="na">selector</span><span class="p">:</span> <span class="s1">'hal'</span><span class="p">,</span>
  <span class="na">template</span><span class="p">:</span> <span class="err">`</span><span class="o">&lt;</span><span class="nx">div</span><span class="o">&gt;</span><span class="p">{{</span> <span class="nx">message</span> <span class="p">}}</span><span class="o">&lt;</span><span class="sr">/div&gt;</span><span class="err">`
</span><span class="p">})</span>
<span class="k">export</span> <span class="kr">class</span> <span class="nx">Hal9000</span> <span class="p">{</span>
  <span class="err">@</span><span class="nx">Input</span><span class="p">()</span> <span class="na">message</span><span class="p">:</span> <span class="kr">string</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
</div>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;hal</span> <span class="err">[</span><span class="na">message</span><span class="err">]="'</span><span class="na">Hello</span><span class="err">,</span> <span class="na">Dave</span><span class="err">.</span> <span class="na">You</span><span class="err">'</span><span class="na">re</span> <span class="na">looking</span> <span class="na">well</span> <span class="na">today</span><span class="err">'"</span><span class="nt">&gt;&lt;/hal&gt;</span>
</code></pre>
</div>

<ol>
  <li><code class="highlighter-rouge">[object Object]</code></li>
  <li>Nothing, the words/grammar are not valid class members.</li>
  <li>Hello, Dave. You’re looking well today</li>
  <li>None: An error will be thrown because Angular can’t parse the message as an object.</li>
</ol>

<p>+++
<!-- .slide: data-background=".././images/answer-slide.jpg" --></p>

<h2 id="answer-3">Answer</h2>

<p>Correct answer is 3.</p>

<p>1, 2: This may expose confusion in that we’re required to pass in a
reference to a class member (or that we can pass multiple class
members in at once) whereas <code class="highlighter-rouge">[]</code> notation really means we’re
evaulating an expression which can actually be anything.</p>

<p>4: If no single quotes (<code class="highlighter-rouge">'</code>) were used this would be the case, however
<code class="highlighter-rouge">[]</code> notation will evaluate the passed value as an expression (in the
context of the component). In this case, <code class="highlighter-rouge">[message]</code> will evaluate to
a string;</p>

          <hr/>
          <a href="http://localhost:4000/">Home</a>
        </div>
      </div>
    </div>
  </body>
</html>
