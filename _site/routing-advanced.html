<!DOCTYPE HTML>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="search-domain" content="http://rangle.io" />
    <link href="http://localhost:4000/css/bootstrap.css" rel="stylesheet" />
    <link href="http://localhost:4000/css/bootstrap-theme.css" rel="stylesheet" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Advanced Routing</title>
  </head>
  <body>
    <div class="container shadow">
      <div class="row-fluid">
        <div class="span10 offset1">
          <p><a href="http://rangle.io">Rangle.io</a> Angular Training</a></p>
          <h1>Advanced Routing</h1>
          <hr />
<!-- .slide: id="routing-advanced-roadmap" -->
<h2 id="roadmap">Roadmap</h2>

<p>FIXME: this module needs to be updated and proof-read</p>

<hr />
<!-- .slide: id="routing-advanced-defining-links-between-routes-1" -->
<p>Alternatively, you can navigate to a route by calling the <code class="highlighter-rouge">navigate</code> function on the router with the path array as the argument. For example to navigate to component-one, we could use:</p>

<div class="language-ts highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'/component-one'</span><span class="p">];</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">navigate</span><span class="p">(</span><span class="nx">path</span><span class="p">);</span>
</code></pre>
</div>

<hr />

<h2 id="defining-links-between-routes-22">Defining Links Between Routes (2/2)</h2>
<!-- .slide: id="routing-advanced-defining-links-between-routes-2" -->
<p>The path array can be seen as segments of an URL.
For example, using the following path in our array:</p>

<div class="language-ts highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'/component-one'</span><span class="p">,</span> <span class="s1">'param1'</span><span class="p">,</span> <span class="s1">'param2'</span><span class="p">];</span>
<span class="nx">router</span><span class="p">.</span><span class="nx">navigate</span><span class="p">(</span><span class="nx">path</span><span class="p">);</span>
</code></pre>
</div>

<p>Will navigate to:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>http://localhost:4200/component-one/param1/param2
</code></pre>
</div>

<p>To use the router service, we need to import and inject it into our constructor.</p>

<div class="language-ts highlighter-rouge"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">Router</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/router'</span><span class="p">;</span>
<span class="p">...</span>
<span class="kd">constructor</span><span class="p">(</span><span class="nx">router</span><span class="err">:</span> <span class="nx">Router</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'/component-one'</span><span class="p">];</span>
  <span class="nx">router</span><span class="p">.</span><span class="nx">navigate</span><span class="p">(</span><span class="nx">path</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">...</span>
</code></pre>
</div>

<hr />
<!-- .slide: id="routing-advanced-handling-404" -->
<h2 id="handling-404">Handling 404</h2>

<p>To detect unmatched routes you can use the <code class="highlighter-rouge">**</code> wildcard in the path.
This wildcard will actually match all URLs,
therefore its important that you list any other specific route paths prior to the <code class="highlighter-rouge">**</code> route.</p>

<p>This is usually your last route in the route configuration.</p>

<div class="language-ts highlighter-rouge"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">routes</span><span class="err">:</span> <span class="nx">Routes</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="s1">'/component-one'</span><span class="p">,</span> <span class="na">component</span><span class="p">:</span> <span class="nx">ComponentOne</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="s1">'/component-two'</span><span class="p">,</span> <span class="na">component</span><span class="p">:</span> <span class="nx">ComponentTwo</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="s1">'/component-three'</span><span class="p">,</span> <span class="na">component</span><span class="p">:</span> <span class="nx">ComponentThree</span> <span class="p">},</span>
  <span class="p">...</span>
  <span class="p">{</span> <span class="nl">path</span><span class="p">:</span> <span class="s1">'**'</span><span class="p">,</span> <span class="nx">component</span><span class="err">:</span> <span class="nx">Four0FourComponent</span> <span class="p">}</span>
<span class="p">];</span>
</code></pre>
</div>

<p>Note: This does not return a 404 status code.</p>

<hr />
<!-- .slide: id="routing-advanced-route-parameters" -->
<h2 id="route-parameters-12">Route Parameters (1/2)</h2>

<p>Adding <code class="highlighter-rouge">:id</code> in the path of the <code class="highlighter-rouge">product-details</code> route places the parameter in the route’s path. For example <code class="highlighter-rouge">localhost:3000/product-details/5</code></p>

<div class="language-ts highlighter-rouge"><pre class="highlight"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">routes</span><span class="err">:</span> <span class="nx">Routes</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="s1">'product-details/:id'</span><span class="p">,</span> <span class="na">component</span><span class="p">:</span> <span class="nx">ProductDetails</span> <span class="p">}</span>
<span class="p">];</span>
</code></pre>
</div>

<p><code class="highlighter-rouge">routerLink</code> directive passes an array which specifies the path and the route parameter. This links the route to the parameter.</p>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;a</span> <span class="err">*</span><span class="na">ngFor=</span><span class="s">"let product of products"</span>
  <span class="err">[</span><span class="na">routerLink</span><span class="err">]="['/</span><span class="na">product-details</span><span class="err">',</span> <span class="na">product</span><span class="err">.</span><span class="na">id</span><span class="err">]"</span><span class="nt">&gt;</span>
  {{ product.name }}
<span class="nt">&lt;/a&gt;</span>
</code></pre>
</div>

<hr />
<!-- .slide: id="routing-advanced-route-parameters-2" -->
<h2 id="route-parameters-22">Route Parameters (2/2)</h2>

<p>The <code class="highlighter-rouge">ActivatedRoute</code> service provides a <code class="highlighter-rouge">params</code> Observable which we can subscribe to to get the route parameters.</p>

<div class="language-ts highlighter-rouge"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">ActivatedRoute</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/router'</span><span class="p">;</span>

<span class="err">@</span><span class="nx">Component</span><span class="p">({</span> <span class="p">...</span> <span class="p">})</span>
<span class="k">export</span> <span class="kr">class</span> <span class="nx">ProductDetails</span> <span class="p">{</span>
  <span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">route</span><span class="err">:</span> <span class="nx">ActivatedRoute</span><span class="p">)</span> <span class="p">{}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">sub</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">route</span><span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">params</span> <span class="o">=&gt;</span> <span class="p">{</span>
       <span class="c1">// params['id'] is the product's id</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<p><a href="https://plnkr.co/edit/lxQRQVqKU7VOqfZYWPuf?p=preview">View Example</a></p>

<p>Notes:</p>

<p>The reason that the <code class="highlighter-rouge">params</code> property on <code class="highlighter-rouge">ActivatedRoute</code> is an Observable is that the router may not recreate the component when navigating to that same component. In this case the parameters may change without the component being recreated.</p>

<hr />
<!-- .slide: id="routing-advanced-passing-optional-parameters-1" -->
<h2 id="passing-optional-parameters-12">Passing Optional Parameters (1/2)</h2>

<p>Use the <code class="highlighter-rouge">[queryParams]</code> directive along with <code class="highlighter-rouge">[routerLink]</code> to pass query parameters. For example:</p>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;a</span> <span class="err">[</span><span class="na">routerLink</span><span class="err">]="['/</span><span class="na">product-list</span><span class="err">']"</span> <span class="err">[</span><span class="na">queryParams</span><span class="err">]="{</span> <span class="na">page:</span> <span class="na">99</span> <span class="err">}"</span><span class="nt">&gt;</span>Go to Page 99<span class="nt">&lt;/a&gt;</span>
</code></pre>
</div>

<p>Alternatively, we can navigate programmatically using the <code class="highlighter-rouge">Router</code> service:</p>

<div class="language-ts highlighter-rouge"><pre class="highlight"><code>  <span class="nx">goToPage</span><span class="p">(</span><span class="nx">pageNum</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">router</span><span class="p">.</span><span class="nx">navigate</span><span class="p">([</span><span class="s1">'/product-list'</span><span class="p">],</span> <span class="p">{</span> <span class="na">queryParams</span><span class="p">:</span> <span class="p">{</span> <span class="na">page</span><span class="p">:</span> <span class="nx">pageNum</span> <span class="p">}</span> <span class="p">});</span>
  <span class="p">}</span>
</code></pre>
</div>

<hr />

<h2 id="passing-optional-parameters-22">Passing Optional Parameters (2/2)</h2>
<!-- .slide: id="routing-advanced-passing-optional-parameters-2" -->
<p>Similar to reading route parameters, the <code class="highlighter-rouge">Router</code> service returns an Observable we can subscribe to to read the query parameters:</p>

<div class="language-ts highlighter-rouge"><pre class="highlight"><code>
<span class="nx">ngOnInit</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">sub</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">route</span>
    <span class="p">.</span><span class="nx">queryParams</span>
    <span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">params</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="c1">// Defaults to 0 if no query param provided.</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">page</span> <span class="o">=</span> <span class="o">+</span><span class="nx">params</span><span class="p">[</span><span class="s1">'page'</span><span class="p">]</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// (+) converts string 'page' to a number</span>
    <span class="p">});</span>
<span class="p">}</span>

<span class="nx">nextPage</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">router</span><span class="p">.</span><span class="nx">navigate</span><span class="p">([</span><span class="s1">'/product-list'</span><span class="p">],</span>
    <span class="p">{</span> <span class="na">queryParams</span><span class="p">:</span> <span class="p">{</span> <span class="na">page</span><span class="p">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">page</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">}</span> <span class="p">});</span>
<span class="p">}</span>
</code></pre>
</div>

<p><a href="http://plnkr.co/edit/Ko6VFRGRmu5jJ9ArwxvC?p=preview">View Example</a></p>

<hr />
<!-- .slide: id="routing-advanced-lazy-loading-1" -->
<h2 id="lazy-loading-13">Lazy Loading (1/3)</h2>

<p>To take advantage of lazy loading it’s important to group the application into modules. Lazy Loading allows us to load modules of the application on demand. Because these modules are not loaded during our bootstrap phase, it helps us to decrease the startup time. On demand modules can be loaded when the user navigates to a specific route. In order to setup lazy loading we need the following:</p>

<ul>
  <li>Remove the component from the <code class="highlighter-rouge">declarations</code> array of the root module</li>
  <li>In the route config use <code class="highlighter-rouge">loadChildren</code> in the path instead of a component</li>
  <li>In the route config we pass a string instead of a symbol to avoid loading the module eagerly</li>
  <li>In the route config we define not only the path to the module but the name of the class as well</li>
</ul>

<p>Here is how our routing should look like:</p>

<div class="language-ts highlighter-rouge"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">routes</span><span class="err">:</span> <span class="nx">Routes</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span> <span class="na">redirectTo</span><span class="p">:</span> <span class="s1">'eager'</span><span class="p">,</span> <span class="na">pathMatch</span><span class="p">:</span> <span class="s1">'full'</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="s1">'eager'</span><span class="p">,</span> <span class="na">component</span><span class="p">:</span> <span class="nx">EagerComponent</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="s1">'lazy'</span><span class="p">,</span> <span class="na">loadChildren</span><span class="p">:</span> <span class="s1">'lazy/lazy.module#LazyModule'</span> <span class="p">}</span>
<span class="p">];</span>
</code></pre>
</div>

<hr />
<!-- .slide: id="routing-advanced-lazy-loading-2" -->
<h2 id="lazy-loading-23">Lazy Loading (2/3)</h2>

<p>There is nothing special in our <code class="highlighter-rouge">LazyModule</code> and <code class="highlighter-rouge">LazyComponent</code>,
they remain simple.
However routing for a feature module should always call <code class="highlighter-rouge">forChild</code> instead of <code class="highlighter-rouge">forRoot</code>,
which we have already seen.
This is specific to any feature modules and not related to lazy loading.</p>

<div class="language-ts highlighter-rouge"><pre class="highlight"><code><span class="k">import</span> <span class="p">{</span> <span class="nx">ModuleWithProviders</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/core'</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Routes</span><span class="p">,</span> <span class="nx">RouterModule</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'@angular/router'</span><span class="p">;</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">LazyComponent</span> <span class="p">}</span> <span class="k">from</span> <span class="s1">'./lazy.component'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">routes</span><span class="err">:</span> <span class="nx">Routes</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span> <span class="na">component</span><span class="p">:</span> <span class="nx">LazyComponent</span> <span class="p">}</span>
<span class="p">];</span>

<span class="k">export</span> <span class="kd">const</span> <span class="nx">routing</span><span class="err">:</span> <span class="nx">ModuleWithProviders</span> <span class="o">=</span> <span class="nx">RouterModule</span><span class="p">.</span><span class="nx">forChild</span><span class="p">(</span><span class="nx">routes</span><span class="p">);</span>
</code></pre>
</div>

<p>Our <code class="highlighter-rouge">LazyComponent</code> has now been setup for lazy loading.
If we start the app, we will see that the <code class="highlighter-rouge">LazyComponent</code> does not get loaded right away.
It only gets loaded the first time, when we navigate to the <code class="highlighter-rouge">lazy</code> route.
If we navigate back and forth now between an eager loaded and lazy loaded module,
we will see that both components are cached now.</p>

<p><a href="https://plnkr.co/edit/vpCqRHDAj7V6mlN1AknN?p=preview">View Example</a></p>

<hr />
<!-- .slide: id="routing-advanced-route-authorization-1" -->
<h2 id="route-authorization-13">Route Authorization (1/3)</h2>

<p>To control whether the user can navigate to or away from a given route, we can use route guards.</p>

<p>In order to use route guards, we must register them with the specific routes we want them to run for.</p>

<div class="language-ts highlighter-rouge"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">routes</span><span class="err">:</span> <span class="nx">Routes</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="s1">'home'</span><span class="p">,</span> <span class="na">component</span><span class="p">:</span> <span class="nx">HomePage</span> <span class="p">},</span>
  <span class="p">{</span>
    <span class="na">path</span><span class="p">:</span> <span class="s1">'accounts'</span><span class="p">,</span>
    <span class="na">component</span><span class="p">:</span> <span class="nx">AccountPage</span><span class="p">,</span>
    <span class="na">canActivate</span><span class="p">:</span> <span class="p">[</span><span class="nx">LoginRouteGuard</span><span class="p">],</span>
    <span class="na">canDeactivate</span><span class="p">:</span> <span class="p">[</span><span class="nx">SaveFormsGuard</span><span class="p">]</span>
  <span class="p">}</span>
<span class="p">];</span>
</code></pre>
</div>

<hr />
<!-- .slide: id="routing-advanced-route-authorization-2" -->
<h2 id="route-authorization-23">Route Authorization (2/3)</h2>

<p>To guard a route against unauthorized activation, we can implement the <code class="highlighter-rouge">CanActivate</code> interface by implementing the <code class="highlighter-rouge">canActivate</code> function.</p>

<p>When <code class="highlighter-rouge">canActivate</code> returns <code class="highlighter-rouge">true</code>, the user can activate the route. When <code class="highlighter-rouge">canActivate</code> returns <code class="highlighter-rouge">false</code>, the user cannot access the route.</p>

<div class="language-ts highlighter-rouge"><pre class="highlight"><code><span class="err">@</span><span class="nx">Injectable</span><span class="p">()</span>
<span class="k">export</span> <span class="kr">class</span> <span class="nx">LoginRouteGuard</span> <span class="k">implements</span> <span class="nx">CanActivate</span> <span class="p">{</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">loginService</span><span class="err">:</span> <span class="nx">LoginService</span><span class="p">)</span> <span class="p">{}</span>

  <span class="nx">canActivate</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">loginService</span><span class="p">.</span><span class="nx">isLoggedIn</span><span class="p">();</span> <span class="c1">// true or false</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<hr />
<!-- .slide: id="routing-advanced-route-authorization-3" -->
<h2 id="route-authorization-33">Route Authorization (3/3)</h2>

<p>CanDeactivate works in a similar way to CanActivate but there are some important differences.</p>

<p>The canDeactivate function passes the component being deactivated as an argument to the function.</p>

<p>We can use that component to determine whether the user can deactivate.</p>

<div class="language-ts highlighter-rouge"><pre class="highlight"><code><span class="nx">canDeactivate</span><span class="p">(</span><span class="nx">component</span><span class="err">:</span> <span class="nx">AccountPage</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">component</span><span class="p">.</span><span class="nx">areFormsSaved</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>
</div>

<hr />
<!-- .slide: id="routing-advanced-child-routes-1" -->
<h2 id="child-routes-14">Child Routes (1/4)</h2>

<p>Child routes are a perfect case for parent/child pages or views.</p>

<p>For example:
The product details page may have a tabbed navigation section
that shows the product overview by default.
When the user clicks the “Technical Specs” tab the section shows the specs instead.
This feature is very common on sites like eBay or Amazon.</p>

<p>If the user clicks on the product with ID 3, we want to show the product details page with the overview:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>localhost:3000/product-details/3/overview
</code></pre>
</div>

<p>When the user clicks “Technical Specs”:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>localhost:3000/product-details/3/specs
</code></pre>
</div>

<p><code class="highlighter-rouge">overview</code> and <code class="highlighter-rouge">specs</code> are child routes of product-details/:id.</p>

<hr />

<h2 id="child-routes-24">Child Routes (2/4)</h2>
<!-- .slide: id="routing-advanced-child-routes-2" -->
<p>The child routes are only reachable from within product details. Our Routes with children would look like:</p>

<div class="language-ts highlighter-rouge"><pre class="highlight"><code><span class="k">export</span> <span class="kd">const</span> <span class="nx">routes</span><span class="err">:</span> <span class="nx">Routes</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span> <span class="na">redirectTo</span><span class="p">:</span> <span class="s1">'product-list'</span><span class="p">,</span> <span class="na">pathMatch</span><span class="p">:</span> <span class="s1">'full'</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="s1">'product-list'</span><span class="p">,</span> <span class="na">component</span><span class="p">:</span> <span class="nx">ProductList</span> <span class="p">},</span>
  <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="s1">'product-details/:id'</span><span class="p">,</span> <span class="na">component</span><span class="p">:</span> <span class="nx">ProductDetails</span><span class="p">,</span>
    <span class="na">children</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span> <span class="na">redirectTo</span><span class="p">:</span> <span class="s1">'overview'</span><span class="p">,</span> <span class="na">pathMatch</span><span class="p">:</span> <span class="s1">'full'</span> <span class="p">},</span>
      <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="s1">'overview'</span><span class="p">,</span> <span class="na">component</span><span class="p">:</span> <span class="nx">Overview</span> <span class="p">},</span>
      <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="s1">'specs'</span><span class="p">,</span> <span class="na">component</span><span class="p">:</span> <span class="nx">Specs</span> <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">];</span>
</code></pre>
</div>

<p>The parent product-details template will contain a <code class="highlighter-rouge">&lt;router-outlet&gt;&lt;/router-outlet&gt;</code>
to display the contents of the child.</p>

<hr />
<!-- .slide: id="routing-advanced-child-routes-3" -->
<h2 id="child-routes-34">Child Routes (3/4)</h2>

<p>An alternative to display the <code class="highlighter-rouge">overview</code> content is to change our children array from:</p>

<div class="language-ts highlighter-rouge"><pre class="highlight"><code>    <span class="nx">children</span><span class="err">:</span> <span class="p">[</span>
      <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span> <span class="na">redirectTo</span><span class="p">:</span> <span class="s1">'overview'</span><span class="p">,</span> <span class="na">pathMatch</span><span class="p">:</span> <span class="s1">'full'</span> <span class="p">},</span>
      <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="s1">'overview'</span><span class="p">,</span> <span class="na">component</span><span class="p">:</span> <span class="nx">Overview</span> <span class="p">},</span>
      <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="s1">'specs'</span><span class="p">,</span> <span class="na">component</span><span class="p">:</span> <span class="nx">Specs</span> <span class="p">}</span>
    <span class="p">]</span>
</code></pre>
</div>

<p>to</p>

<div class="language-ts highlighter-rouge"><pre class="highlight"><code>    <span class="nx">children</span><span class="err">:</span> <span class="p">[</span>
      <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span> <span class="na">component</span><span class="p">:</span> <span class="nx">Overview</span> <span class="p">},</span>
      <span class="p">{</span> <span class="na">path</span><span class="p">:</span> <span class="s1">'specs'</span><span class="p">,</span> <span class="na">component</span><span class="p">:</span> <span class="nx">Specs</span> <span class="p">}</span>
    <span class="p">]</span>
</code></pre>
</div>

<p>This way we can get rid of the first empty item, which essentially just redirects the user to the <code class="highlighter-rouge">overview</code> route.</p>

<hr />
<!-- .slide: id="routing-advanced-child-routes-4" -->
<h2 id="child-routes-44">Child Routes (4/4)</h2>

<p>To display the <code class="highlighter-rouge">overview</code> or <code class="highlighter-rouge">specs</code> section of a parent, the child route will need the product ID from the parent. The child route component can access the parent route’s parameters as follows using the <code class="highlighter-rouge">Router</code> and <code class="highlighter-rouge">ActivatedRoute</code></p>

<div class="language-ts highlighter-rouge"><pre class="highlight"><code><span class="k">export</span> <span class="k">default</span> <span class="kr">class</span> <span class="nx">Overview</span> <span class="p">{</span>
  <span class="nl">parentRouteId</span><span class="p">:</span> <span class="kr">number</span><span class="p">;</span>
  <span class="k">private</span> <span class="nx">sub</span><span class="err">:</span> <span class="kr">any</span><span class="p">;</span>

  <span class="kd">constructor</span><span class="p">(</span><span class="k">private</span> <span class="nx">router</span><span class="err">:</span> <span class="nx">Router</span><span class="p">,</span>
    <span class="k">private</span> <span class="nx">route</span><span class="err">:</span> <span class="nx">ActivatedRoute</span><span class="p">)</span> <span class="p">{}</span>

  <span class="nx">ngOnInit</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Get parent ActivatedRoute of this route.</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">sub</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">router</span><span class="p">.</span><span class="nx">routerState</span><span class="p">.</span><span class="nx">parent</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">route</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">params</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">params</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">parentRouteId</span> <span class="o">=</span> <span class="o">+</span><span class="nx">params</span><span class="p">[</span><span class="s2">"id"</span><span class="p">];</span>
      <span class="p">});</span>
  <span class="p">}</span>

  <span class="nx">ngOnDestroy</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">sub</span><span class="p">.</span><span class="nx">unsubscribe</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

          <hr/>
          <a href="http://localhost:4000/">Home</a>
        </div>
      </div>
    </div>
  </body>
</html>
